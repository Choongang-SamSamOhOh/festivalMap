<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="com.oracle.s202350104.CourseMapper">
	
		<select id="courseCount" resultType="int">
			select Count(*) from courses
		</select>
		
		<select id="courseListAll" parameterType="Course" resultType="Course">
			<!-- select * from courses -->
		
			SELECT *
			FROM   courseContents a
			JOIN   courses b
			ON     a.course_id = b.id
			JOIN   contents c
			ON     a.content_id = c.id
			WHERE  a.order_num = 1
			ORDER  by b.id ASC
		</select>
		
		<select id="noCourseDetailList" parameterType="int" resultType="CourseContent">
			SELECT a.*,cd.content cd_content
			FROM(
			    SELECT cc.*, c.*, cs.course_info, cs.course_title, cs.distance, cs.time
			    FROM courseContents cc, contents c, courses cs
			    WHERE cc.course_id= #{course_id}
			    AND cc.content_id = c.id
			    AND cc.course_id = cs.id
			)a, commonCodes cd
			WHERE a.big_code = cd.big_code
			AND cd.small_code = 999
			
			<!-- SELECT *
			FROM   courseContents a
			JOIN   courses b
			ON     a.course_id = b.id
			JOIN   contents c
			ON     a.content_id = c.id
			WHERE  a.course_id = #{course_id}
			ORDER  by b.id ASC -->
		</select>
		
	</mapper>