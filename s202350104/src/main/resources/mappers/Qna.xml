<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oracle.s202350104.SpotMapper">
   <select id="dhQnaListAll" resultType="Qna" parameterType="Qna">
      SELECT *
      FROM 
      (   
             SELECT rownum rn, a.*
             FROM 
               (select q.*, u.name, u.password, u.nickname, u.birthday
                from qna q, users u
                where q.user_id = u.id
                 order by q.id) a
      )
      WHERE rn BETWEEN #{start} and #{end}
      
   </select>
   
   <select id="qnaTotal" resultType="int">
   SELECT   count(*)
   FROM   qna
   </select>
   
   <select id="dhDetailQna" resultType="Qna" parameterType="Qna">
   SELECT 	*
   FROM		qna
   WHERE	id = #{id}	
   AND		user_id = #{user_id}
   
   </select>
   
    <insert id="dhQnaInsert" parameterType="Qna">
   INSERT INTO 	qna(user_id, id, question_title, question_content, created_at)
   VALUES(#{user_id},qna_id_seq.nextval,#{question_title},#{question_content},sysdate)
   </insert>
   
</mapper>   

